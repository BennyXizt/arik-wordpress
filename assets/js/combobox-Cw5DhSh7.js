var m=(e=>(e[e.default=0]="default",e[e.firstLetter=1]="firstLetter",e))(m||{});let x=[],y=!1;const q=[C,"[data-fsc-combobox-id]"];function C(e){var a,c,u;const s=e.target,r=s.closest("li[data-fsc-combobox-item]"),l=s.closest("[data-fsc-combobox]"),p=s.closest("[data-fsc-combobox-input-icon-close]"),f=document.createElement("div"),o=l==null?void 0:l.closest("[data-fsc-combobox-id]");if(l&&(o==null?void 0:o.getAttribute("data-fsc-combobox-collapsed"))==="false"){const t=o==null?void 0:o.querySelector("ul"),i=t==null?void 0:t.querySelectorAll("p"),n=i?Array.from(i):[],b={ul:t,list:Array.from(i),searchType:m.default,searchTerm:(c=(a=l.value)==null?void 0:a.trim())==null?void 0:c.toLowerCase()};x.length==0&&x.push(...n),l.hasAttribute("data-fsc-combobox-result")&&L(b),o&&(f.setAttribute("data-fsc-combobox-blank",""),(u=document.querySelector("body"))==null||u.append(f),o.dataset.fscComboboxCollapsed="true",f.addEventListener("click",d))}if(r){const t=s.closest("[data-fsc-combobox-id]"),i=t==null?void 0:t.querySelector("input"),n=t==null?void 0:t.querySelector("svg[data-fsc-combobox-input-icon-close]");n&&n.setAttribute("data-fsc-combobox-collapsed",""),i&&(i.value=r.textContent.trim(),i.setAttribute("data-fsc-combobox-result",""),d())}if(p){const t=s.closest("[data-fsc-combobox-id]"),i=t==null?void 0:t.querySelector("input"),n=t==null?void 0:t.querySelector("ul"),b=n==null?void 0:n.querySelectorAll("p");if(b&&Array.from(b),i)if(i.value!==""){i.value="",s.removeAttribute("data-fsc-combobox-collapsed");const A={ul:n,list:Array.from(b),searchType:m.default,searchTerm:""};L(A)}else d()}function d(){document.querySelectorAll("[data-fsc-combobox-collapsed='true']").forEach(t=>{t.dataset.fscComboboxCollapsed="false"}),f.removeEventListener("click",d),document.querySelector("[data-fsc-combobox-blank]").remove()}v()}function v(){if(y)return;y=!0;const e=document.querySelector("[data-fsc-combobox-collapsed='true'] input");e&&(e==null||e.removeEventListener("keyup",s),e==null||e.addEventListener("keyup",s));function s(){var d,a;const r=this.closest("article[data-fsc-combobox-id]"),l=r==null?void 0:r.querySelector("ul"),p=(a=(d=this.value)==null?void 0:d.trim())==null?void 0:a.toLowerCase(),o={list:[...x],searchTerm:p,ul:l,searchType:m.default};L(o)}}function L({list:e,searchTerm:s,ul:r,searchType:l}){const p=e?Array.from(e):[],f=r==null?void 0:r.closest("[data-fsc-combobox-id]"),o=f==null?void 0:f.querySelector("img[data-fsc-combobox-input-icon-close]");if(p.length>0&&s&&r){o==null||o.setAttribute("data-fsc-combobox-collapsed","");const d=p.filter(a=>{var c,u,t,i,n,b;if(l==m.firstLetter)return(t=(u=(c=a.textContent)==null?void 0:c.trim())==null?void 0:u.toLowerCase())==null?void 0:t.startsWith(s);if(l==m.default)return(b=(n=(i=a.textContent)==null?void 0:i.trim())==null?void 0:n.toLowerCase())==null?void 0:b.includes(s)}).map(a=>{const c=a.textContent;let u="";return l==m.firstLetter?u=c==null?void 0:c.replace(new RegExp(s,"i"),t=>`<span data-fsc-combobox-highlited>${t}</span>`):l==m.default&&(u=c==null?void 0:c.replace(new RegExp(s,"ig"),t=>`<span data-fsc-combobox-highlited>${t}</span>`)),{span:u,image:a.querySelector("svg")}});r.innerHTML="",d.forEach(a=>{var c;r.insertAdjacentHTML("beforeend",`<li data-fsc-combobox-item>
                    <p>
                        ${a.span}
                        ${(c=a.image)==null?void 0:c.outerHTML}
                    </p>
                </li>`)})}else s==""&&r&&(o==null||o.removeAttribute("data-fsc-combobox-collapsed"),r.innerHTML="",x.forEach(d=>{r.insertAdjacentHTML("beforeend",`<li data-fsc-combobox-item>
                ${d.outerHTML}
            </li>`)}),f&&(f.dataset.fscComboboxCollapsed="true"))}export{q as comboboxClickArray};
