const g=[];let A=!1;function b(){const e=document.querySelectorAll("[data-fsc-marquee]");for(const t of e){if(t.getAttribute("data-fsc-marquee-initialized"))continue;const l=t.getAttribute("data-fsc-marquee-speed")?parseInt(t.getAttribute("data-fsc-marquee-speed")):1e3,o=t.getAttribute("data-fsc-marquee-direction"),q=t.getAttribute("data-fsc-marquee-start")?parseInt(t.getAttribute("data-fsc-marquee-start")):0,n=t.querySelectorAll("[data-fsc-marquee-item]"),a=Number.parseInt(getComputedStyle(t).columnGap),m=o==="left"||o==="right"||o==="top"||o==="bottom"?o:"left";let u=Array.from(n).reduce((i,f)=>i+f.getBoundingClientRect().width,0)+a*(n.length-1);const h=Array.from(n),s=t.getBoundingClientRect().width,p=n.length-1;let c=0;for(;u<=s;){const i=h[c].cloneNode(!0);i.setAttribute("data-fsc-marquee-clone",""),t.appendChild(i),c=c===p?0:++c,u+=i.getBoundingClientRect().width+a}const r=t.querySelectorAll("[data-fsc-marquee-item]"),d=Array.from(r);for(const i of d){const f=i.cloneNode(!0);f.setAttribute("data-fsc-marquee-clone",""),t.appendChild(f)}g.push({root:t,childrensWidth:u,gap:a,speed:l,offset:q,direction:m}),t.setAttribute("data-fsc-marquee-initialized","true")}A||(A=!0,requestAnimationFrame(y))}function C(){for(const e of g){const t=e.root,l=Number.parseInt(getComputedStyle(t).columnGap),o=t.getAttribute("data-fsc-marquee-start")?parseInt(t.getAttribute("data-fsc-marquee-start")):0;t.querySelectorAll("[data-fsc-marquee-clone]").forEach(r=>r.remove());const n=t.querySelectorAll("[data-fsc-marquee-item]");let a=Array.from(n).reduce((r,d)=>r+d.getBoundingClientRect().width,0)+l*(n.length-1);e.gap=l,e.offset=o,e.childrensWidth=a;const m=Array.from(n),u=t.getBoundingClientRect().width,h=n.length-1;let s=0;for(;a<=u;){const r=m[s].cloneNode(!0);r.setAttribute("data-fsc-marquee-clone",""),t.appendChild(r),s=s===h?0:++s,a+=r.getBoundingClientRect().width+l}const p=t.querySelectorAll("[data-fsc-marquee-item]"),c=Array.from(p);for(const r of c){const d=r.cloneNode(!0);d.setAttribute("data-fsc-marquee-clone",""),t.appendChild(d)}}}function y(){for(const e of g)e.direction==="left"?(e.offset-=e.speed/1e3,e.offset<-e.childrensWidth&&(e.offset=e.gap),e.root.style.transform=`translate3d(${e.offset}px, 0, 0)`):e.direction==="right"&&(e.offset+=e.speed/1e3,e.offset>=e.gap&&(e.offset=-e.childrensWidth),e.root.style.transform=`translate3d(${e.offset}px, 0, 0)`);requestAnimationFrame(y)}export{b as marqueeAutoload,C as marqueeOnResize};
